<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting Started with rrlmgraph • rrlmgraph</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started with rrlmgraph">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rrlmgraph</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/getting-started.html">Getting Started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/davidrsch/rrlmgraph"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<script src="getting-started_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="getting-started_files/viz-1.8.2/viz.js"></script><link href="getting-started_files/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="getting-started_files/grViz-binding-1.0.11/grViz.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Getting Started with rrlmgraph</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/davidrsch/rrlmgraph/blob/main/vignettes/getting-started.Rmd" class="external-link"><code>vignettes/getting-started.Rmd</code></a></small>
      <div class="d-none name"><code>getting-started.Rmd</code></div>
    </div>

    
    
<p><code>rrlmgraph</code> builds a typed knowledge graph of an R project
and uses it to supply large language models (LLMs) with precise,
token-budgeted context. This vignette walks through the full workflow on
a small self-contained example.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"rrlmgraph"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># For optional LLM chat integration:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"ellmer"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="building-your-first-graph">1. Building your first graph<a class="anchor" aria-label="anchor" href="#building-your-first-graph"></a>
</h2>
<p><code><a href="../reference/build_rrlm_graph.html">build_rrlm_graph()</a></code> accepts a path to any R project – a
package, a scripts folder, or a Shiny app – and returns an
<code>rrlm_graph</code> object.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://davidrsch.github.io/rrlmgraph/">rrlmgraph</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Build the graph from the bundled demo project -- eight real functions with</span></span>
<span><span class="co"># genuine CALLS relationships guarantees a non-trivial graph in every</span></span>
<span><span class="co"># environment without needing any external files.</span></span>
<span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_rrlm_graph.html">build_rrlm_graph</a></span><span class="op">(</span><span class="va">demo_dir</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Detecting project at <span style="color: #0000BB;">/home/runner/work/_temp/Library/rrlmgraph/extdata/demo</span></span></span>
<span><span class="co">#&gt; Parsing 3 R file(s)</span></span>
<span><span class="co">#&gt; Warning: &lt;anonymous&gt;: ... may be used in an incorrect context: 'fit_model(raw, ...)' (/home/runner/work/_temp/Library/rrlmgraph/extdata/demo/predict.R:51)</span></span>
<span><span class="co">#&gt; Building CALLS edges</span></span>
<span><span class="co">#&gt; Building IMPORT edges</span></span>
<span><span class="co">#&gt; Building TEST edges</span></span>
<span><span class="co">#&gt; Building CO_CHANGES edges from git history</span></span>
<span><span class="co">#&gt; Building DISPATCHES_ON / EXTENDS edges</span></span>
<span><span class="co">#&gt; Assembling igraph</span></span>
<span><span class="co">#&gt; Computing PageRank</span></span>
<span><span class="co">#&gt; Embedding nodes with method 'tfidf'</span></span>
<span><span class="co">#&gt; Computing semantic similarity edges (threshold 0.7)</span></span>
<span><span class="co">#&gt; Done in 0.6s -- 22 nodes, 11 edges</span></span></code></pre></div>
<p>The function:</p>
<ol style="list-style-type: decimal">
<li>Detects the project type (package / scripts / Shiny app)</li>
<li>Parses every <code>.R</code> file into function nodes via AST
analysis</li>
<li>Resolves CALLS, IMPORTS, and TEST edges between nodes</li>
<li>Fits TF-IDF embeddings for semantic similarity</li>
</ol>
</div>
<div class="section level2">
<h2 id="inspecting-the-graph">2. Inspecting the graph<a class="anchor" aria-label="anchor" href="#inspecting-the-graph"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">graph</span><span class="op">)</span></span>
<span><span class="co">#&gt; === rrlm_graph: demo ===</span></span>
<span><span class="co">#&gt; Root:  /home/runner/work/_temp/Library/rrlmgraph/extdata/demo</span></span>
<span><span class="co">#&gt; Built: 2026-02-22 23:05:13</span></span>
<span><span class="co">#&gt; Build time: 0.6 s</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Nodes (22 total):</span></span>
<span><span class="co">#&gt;   package: 13</span></span>
<span><span class="co">#&gt;   function: 9</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Edges (11 total):</span></span>
<span><span class="co">#&gt;   CALLS: 11</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Top-5 nodes by PageRank:</span></span>
<span><span class="co">#&gt;   1. demo/data_prep::clean_data (0.140048)</span></span>
<span><span class="co">#&gt;   2. demo/data_prep::validate_inputs (0.060685)</span></span>
<span><span class="co">#&gt;   3. demo/data_prep::prepare_data (0.05684)</span></span>
<span><span class="co">#&gt;   4. demo/model::select_features (0.049078)</span></span>
<span><span class="co">#&gt;   5. demo/model::tune_hyperparams (0.049078)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Metadata:</span></span>
<span><span class="co">#&gt;   Embed method: tfidf</span></span>
<span><span class="co">#&gt;   Cache path:   /home/runner/work/_temp/Library/rrlmgraph/extdata/demo/.rrlmgraph/graph.rds</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">graph</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;rrlm_graph&gt; demo | 22 nodes | 11 edges | embed: tfidf</span></span></code></pre></div>
<p><code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> draws a force-directed layout coloured by node
type:</p>
<ul>
<li>
<strong>steelblue</strong> – user-defined functions (size scales
with PageRank)</li>
<li>
<strong>pale blue</strong> – package / imported dependencies</li>
<li>
<strong>seagreen</strong> – test files</li>
<li>Labels on function nodes only; arrows show CALLS direction</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">graph</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:100%;height:100%;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"diagram":"digraph rrlmgraph {\n  graph [layout=dot, rankdir=LR, fontname=\"Helvetica\", label=\"demo  —  top 9 hubs\", labelloc=t, fontsize=14, splines=ortho, nodesep=0.5, ranksep=0.8];\n  node  [shape=box, style=\"rounded,filled\", fontname=\"Helvetica\", fontsize=10, penwidth=0.5, margin=0.1];\n  edge  [arrowsize=0.5];\n\n  subgraph cluster_demo_data_prep {\n    label=\"demo.data.prep.R\";\n    style=dashed;\n    color=\"#AAAAAA\";\n    fontcolor=\"#666666\";\n    fontsize=10;\n    n1; n2; n3;\n  }\n\n  subgraph cluster_demo_model {\n    label=\"demo.model.R\";\n    style=dashed;\n    color=\"#AAAAAA\";\n    fontcolor=\"#666666\";\n    fontsize=10;\n    n4; n5; n6;\n  }\n\n  subgraph cluster_demo_predict {\n    label=\"demo.predict.R\";\n    style=dashed;\n    color=\"#AAAAAA\";\n    fontcolor=\"#666666\";\n    fontsize=10;\n    n7; n8; n9;\n  }\n\n  n1 [label=\"validate_inputs\", fillcolor=\"#4682B4\", fontcolor=\"white\", width=0.77];\n  n2 [label=\"clean_data\", fillcolor=\"#4682B4\", fontcolor=\"white\", width=2.00];\n  n3 [label=\"prepare_data\", fillcolor=\"#4682B4\", fontcolor=\"white\", width=0.71];\n  n4 [label=\"select_features\", fillcolor=\"#4682B4\", fontcolor=\"white\", width=0.59];\n  n5 [label=\"tune_hyperparams\", fillcolor=\"#4682B4\", fontcolor=\"white\", width=0.59];\n  n6 [label=\"fit_model\", fillcolor=\"#4682B4\", fontcolor=\"white\", width=0.52];\n  n7 [label=\"predict_results\", fillcolor=\"#4682B4\", fontcolor=\"white\", width=0.52];\n  n8 [label=\"evaluate_predictions\", fillcolor=\"#4682B4\", fontcolor=\"white\", width=0.52];\n  n9 [label=\"run_pipeline\", fillcolor=\"#4682B4\", fontcolor=\"white\", width=0.40];\n\n  n3 -> n1 [color=\"#888888\"];\n  n3 -> n2 [color=\"#888888\"];\n  n4 -> n2 [color=\"#888888\"];\n  n6 -> n3 [color=\"#888888\"];\n  n6 -> n4 [color=\"#888888\"];\n  n6 -> n5 [color=\"#888888\"];\n  n7 -> n2 [color=\"#888888\"];\n  n9 -> n3 [color=\"#888888\"];\n  n9 -> n6 [color=\"#888888\"];\n  n9 -> n7 [color=\"#888888\"];\n  n9 -> n8 [color=\"#888888\"];\n}\n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":{"render":[{"code":"function(el) {\n    // viz.js renders the SVG asynchronously; poll until it appears\n    var MAX_WAIT = 3000, INTERVAL = 50, waited = 0;\n    var timer = setInterval(function() {\n      waited += INTERVAL;\n      var svg = el.querySelector('svg');\n      if (!svg && waited < MAX_WAIT) return;\n      clearInterval(timer);\n      if (!svg) return;\n\n      // --- Read Graphviz natural dimensions ----------------------------\n      var nw = parseFloat(svg.getAttribute('width'))  || svg.viewBox.baseVal.width  || 800;\n      var nh = parseFloat(svg.getAttribute('height')) || svg.viewBox.baseVal.height || 600;\n\n      // Remove fixed attrs so the SVG fills the container via CSS\n      svg.removeAttribute('width');\n      svg.removeAttribute('height');\n      svg.style.display  = 'block';\n      svg.style.width    = '100%';\n      svg.style.height   = '100%';\n      svg.style.cursor   = 'grab';\n      svg.style.userSelect = 'none';\n\n      // viewBox state: (ox, oy) = top-left corner; (vw, vh) = viewport size\n      var ox = 0, oy = 0, vw = nw, vh = nh;\n      function setVB() {\n        svg.setAttribute('viewBox', ox + ' ' + oy + ' ' + vw + ' ' + vh);\n      }\n      setVB();\n\n      // --- Mouse wheel zoom centred on cursor --------------------------\n      el.addEventListener('wheel', function(e) {\n        e.preventDefault();\n        var rect  = svg.getBoundingClientRect();\n        var px    = (e.clientX - rect.left)  / rect.width;   // 0-1 fraction\n        var py    = (e.clientY - rect.top)   / rect.height;\n        var factor = e.deltaY < 0 ? 0.85 : (1 / 0.85);\n        var nvw = vw * factor, nvh = vh * factor;\n        ox = ox + (vw - nvw) * px;\n        oy = oy + (vh - nvh) * py;\n        vw = nvw; vh = nvh;\n        setVB();\n      }, {passive: false});\n\n      // --- Click-drag pan ----------------------------------------------\n      var dragging = false, lastMX, lastMY;\n      el.addEventListener('mousedown', function(e) {\n        dragging = true;\n        lastMX = e.clientX; lastMY = e.clientY;\n        svg.style.cursor = 'grabbing';\n        e.preventDefault();\n      });\n      window.addEventListener('mousemove', function(e) {\n        if (!dragging) return;\n        var rect = svg.getBoundingClientRect();\n        ox -= (e.clientX - lastMX) / rect.width  * vw;\n        oy -= (e.clientY - lastMY) / rect.height * vh;\n        lastMX = e.clientX; lastMY = e.clientY;\n        setVB();\n      });\n      window.addEventListener('mouseup', function() {\n        if (dragging) { dragging = false; svg.style.cursor = 'grab'; }\n      });\n\n      // --- Touch: one-finger pan, two-finger pinch-zoom ----------------\n      var lastTouches = null;\n      el.addEventListener('touchstart', function(e) {\n        e.preventDefault();\n        lastTouches = Array.from(e.touches).map(function(t) {\n          return {x: t.clientX, y: t.clientY};\n        });\n      }, {passive: false});\n      el.addEventListener('touchmove', function(e) {\n        e.preventDefault();\n        var rect = svg.getBoundingClientRect();\n        var cur  = Array.from(e.touches).map(function(t) {\n          return {x: t.clientX, y: t.clientY};\n        });\n        if (cur.length === 1 && lastTouches && lastTouches.length >= 1) {\n          ox -= (cur[0].x - lastTouches[0].x) / rect.width  * vw;\n          oy -= (cur[0].y - lastTouches[0].y) / rect.height * vh;\n        } else if (cur.length === 2 && lastTouches && lastTouches.length === 2) {\n          var d0 = Math.hypot(lastTouches[1].x - lastTouches[0].x,\n                              lastTouches[1].y - lastTouches[0].y);\n          var d1 = Math.hypot(cur[1].x - cur[0].x, cur[1].y - cur[0].y);\n          if (d0 > 0) {\n            var factor = d0 / d1;\n            var cx = ((cur[0].x + cur[1].x) / 2 - rect.left)  / rect.width;\n            var cy = ((cur[0].y + cur[1].y) / 2 - rect.top)   / rect.height;\n            var nvw = vw * factor, nvh = vh * factor;\n            ox = ox + (vw - nvw) * cx;\n            oy = oy + (vh - nvh) * cy;\n            vw = nvw; vh = nvh;\n          }\n        }\n        lastTouches = cur;\n        setVB();\n      }, {passive: false});\n\n      // --- Double-click: reset to original fit-to-screen ---------------\n      el.addEventListener('dblclick', function() {\n        ox = 0; oy = 0; vw = nw; vh = nh;\n        setVB();\n      });\n    }, INTERVAL);\n  }","data":null}]}}</script>
</div>
<div class="section level2">
<h2 id="querying-context">3. Querying context<a class="anchor" aria-label="anchor" href="#querying-context"></a>
</h2>
<p><code><a href="../reference/query_context.html">query_context()</a></code> performs relevance-guided BFS from the
most relevant nodes and returns a token-budgeted context window ideal
for LLM prompts.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ctx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/query_context.html">query_context</a></span><span class="op">(</span></span>
<span>  <span class="va">graph</span>,</span>
<span>  query <span class="op">=</span> <span class="st">"How does the data preparation and validation pipeline work?"</span>,</span>
<span>  budget_tokens <span class="op">=</span> <span class="fl">400L</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Seed node: <span style="color: #0000BB;">"demo/data_prep::clean_data"</span></span></span>
<span></span>
<span><span class="co"># Nodes selected for the context window</span></span>
<span><span class="va">ctx</span><span class="op">$</span><span class="va">nodes</span></span>
<span><span class="co">#&gt; [1] "demo/data_prep::clean_data"</span></span>
<span></span>
<span><span class="co"># Number of tokens used</span></span>
<span><span class="va">ctx</span><span class="op">$</span><span class="va">tokens_used</span></span>
<span><span class="co">#&gt; [1] 111</span></span></code></pre></div>
<p>The assembled context string – ready to paste into a system
prompt:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">ctx</span><span class="op">$</span><span class="va">context_string</span><span class="op">)</span></span>
<span><span class="co">#&gt; # rrlm_graph Context</span></span>
<span><span class="co">#&gt; # Project: demo | R 4.5.2 | ~127 tokens</span></span>
<span><span class="co">#&gt; # Query: How does the data preparation and validation pipeline work?</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## CORE FUNCTIONS</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; ### demo/data_prep::clean_data</span></span>
<span><span class="co">#&gt; #' Remove incomplete and duplicate rows</span></span>
<span><span class="co">#&gt; #'</span></span>
<span><span class="co">#&gt; #' @param raw A data.frame.</span></span>
<span><span class="co">#&gt; #' @return A cleaned data.frame with complete, deduplicated rows.</span></span>
<span><span class="co">#&gt; #' @export</span></span>
<span><span class="co">#&gt; clean_data(raw) {</span></span>
<span><span class="co">#&gt; clean_data &lt;- function(raw) {</span></span>
<span><span class="co">#&gt;   raw &lt;- raw[stats::complete.cases(raw), , drop = FALSE]</span></span>
<span><span class="co">#&gt;   raw &lt;- unique(raw)</span></span>
<span><span class="co">#&gt;   raw</span></span>
<span><span class="co">#&gt; }</span></span>
<span><span class="co">#&gt; }</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## CONSTRAINTS</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Only use the functions and packages listed above. Do not invent APIs, function names, or arguments not shown here. If unsure, ask for clarification.</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="chatting-with-context-llm-required">4. Chatting with context (LLM required)<a class="anchor" aria-label="anchor" href="#chatting-with-context-llm-required"></a>
</h2>
<p><code><a href="../reference/chat_with_context.html">chat_with_context()</a></code> assembles the context and sends it
to an LLM. Supported providers via the <code>ellmer</code> package:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># OpenAI (default) -- requires OPENAI_API_KEY</span></span>
<span><span class="va">answer</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/chat_with_context.html">chat_with_context</a></span><span class="op">(</span></span>
<span>  <span class="va">graph</span>,</span>
<span>  <span class="st">"How does prepare_data() ensure clean input?"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">answer</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># GitHub Models Marketplace -- requires GITHUB_PAT</span></span>
<span><span class="va">answer</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/chat_with_context.html">chat_with_context</a></span><span class="op">(</span></span>
<span>  <span class="va">graph</span>,</span>
<span>  <span class="st">"What does fit_model() return?"</span>,</span>
<span>  provider <span class="op">=</span> <span class="st">"github"</span>,</span>
<span>  model    <span class="op">=</span> <span class="st">"gpt-4o-mini"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Local Ollama -- no API key needed</span></span>
<span><span class="va">answer</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/chat_with_context.html">chat_with_context</a></span><span class="op">(</span></span>
<span>  <span class="va">graph</span>,</span>
<span>  <span class="st">"Walk me through the prediction pipeline."</span>,</span>
<span>  provider <span class="op">=</span> <span class="st">"ollama"</span>,</span>
<span>  model    <span class="op">=</span> <span class="st">"llama3.2"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Anthropic Claude -- requires ANTHROPIC_API_KEY</span></span>
<span><span class="va">answer</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/chat_with_context.html">chat_with_context</a></span><span class="op">(</span></span>
<span>  <span class="va">graph</span>,</span>
<span>  <span class="st">"Which function calls prepare_data()?"</span>,</span>
<span>  provider <span class="op">=</span> <span class="st">"anthropic"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Each call automatically logs the query, nodes used, and a response
excerpt to <code>.rrlmgraph/task_trace.jsonl</code> inside the project
root. This trace is used by <code><a href="../reference/update_task_weights.html">update_task_weights()</a></code> to boost
frequently-referenced nodes in future relevance scoring.</p>
</div>
<div class="section level2">
<h2 id="incremental-updates">5. Incremental updates<a class="anchor" aria-label="anchor" href="#incremental-updates"></a>
</h2>
<p>After editing source files you do not need to rebuild the full graph.
<code><a href="../reference/update_graph_incremental.html">update_graph_incremental()</a></code> re-parses only the changed
files:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Simulate editing a file</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"#' Prepare data (updated)"</span>,</span>
<span>  <span class="st">"#'"</span>,</span>
<span>  <span class="st">"#' @param raw A data.frame of raw values."</span>,</span>
<span>  <span class="st">"#' @param remove_na Logical. Remove rows with NAs. Default TRUE."</span>,</span>
<span>  <span class="st">"#' @return A cleaned data.frame."</span>,</span>
<span>  <span class="st">"#' @export"</span>,</span>
<span>  <span class="st">"prepare_data &lt;- function(raw, remove_na = TRUE) {"</span>,</span>
<span>  <span class="st">"  if (remove_na) raw &lt;- raw[complete.cases(raw), ]"</span>,</span>
<span>  <span class="st">"  raw"</span>,</span>
<span>  <span class="st">"}"</span></span>
<span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">proj_dir</span>, <span class="st">"R"</span>, <span class="st">"data_prep.R"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">graph_small</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/update_graph_incremental.html">update_graph_incremental</a></span><span class="op">(</span></span>
<span>  <span class="va">graph_small</span>,</span>
<span>  changed_files <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">proj_dir</span>, <span class="st">"R"</span>, <span class="st">"data_prep.R"</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Incremental graph update</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Changed files: <span style="color: #0000BB;">/tmp/RtmpPM0eUd/mypkg_demo/R/data_prep.R</span></span></span>
<span><span class="co">#&gt; Removing 1 stale node(s).</span></span>
<span><span class="co">#&gt; Re-parsing 1 file(s).</span></span>
<span><span class="co">#&gt; Embedding 1 new node(s) using method 'tfidf'.</span></span>
<span><span class="co">#&gt; Graph now has 2 nodes, 0 edges.</span></span>
<span><span class="co">#&gt; Recomputing PageRank.</span></span>
<span><span class="co">#&gt; Persisting cache to <span style="color: #0000BB;">/tmp/RtmpPM0eUd/mypkg_demo</span>.</span></span>
<span><span class="co">#&gt; Graph cached at <span style="color: #0000BB;">/tmp/RtmpPM0eUd/mypkg_demo/.rrlmgraph</span></span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">graph_small</span><span class="op">)</span></span>
<span><span class="co">#&gt; IGRAPH 48090ab DNW- 2 0 -- </span></span>
<span><span class="co">#&gt; + attr: project_name (g/c), project_root (g/c), project_type (g/c),</span></span>
<span><span class="co">#&gt; | r_version (g/c), build_time (g/n), build_at (g/c), embed_method</span></span>
<span><span class="co">#&gt; | (g/c), embed_model (g/x), cache_path (g/c), name (v/c), node_type</span></span>
<span><span class="co">#&gt; | (v/c), file (v/c), line_start (v/n), line_end (v/n), signature (v/c),</span></span>
<span><span class="co">#&gt; | body_text (v/c), roxygen_text (v/c), complexity (v/n), pagerank</span></span>
<span><span class="co">#&gt; | (v/n), task_trace_weight (v/n), embedding (v/x), label (v/c), pkg</span></span>
<span><span class="co">#&gt; | (v/c), doc (v/c), weight (e/n), edge_type (e/c)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="caching-the-graph">6. Caching the graph<a class="anchor" aria-label="anchor" href="#caching-the-graph"></a>
</h2>
<p>For large projects, save the built graph to avoid re-parsing on every
session:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Save to &lt;project&gt;/.rrlmgraph/graph.rds</span></span>
<span><span class="fu"><a href="../reference/save_graph_cache.html">save_graph_cache</a></span><span class="op">(</span><span class="va">graph</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Restore in a later session</span></span>
<span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_graph_cache.html">load_graph_cache</a></span><span class="op">(</span><span class="va">proj_dir</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="generating-copilot-instructions">7. Generating Copilot instructions<a class="anchor" aria-label="anchor" href="#generating-copilot-instructions"></a>
</h2>
<p><code><a href="../reference/generate_instructions.html">generate_instructions()</a></code> writes a
<code>.github/copilot-instructions.md</code> file that primes GitHub
Copilot with project-specific context derived from the graph:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/generate_instructions.html">generate_instructions</a></span><span class="op">(</span><span class="va">graph</span>, max_tokens <span class="op">=</span> <span class="fl">3000L</span><span class="op">)</span></span></code></pre></div>
<p>The generated file describes the project structure, key functions,
and their call relationships, giving Copilot accurate context without
manual maintenance.</p>
</div>
<div class="section level2">
<h2 id="using-the-mcp-server">8. Using the MCP server<a class="anchor" aria-label="anchor" href="#using-the-mcp-server"></a>
</h2>
<p>For integration with VS Code and other MCP-capable editors, see the
companion package <strong>rrlmgraph-mcp</strong>: <a href="https://github.com/davidrsch/rrlmgraph-mcp" class="external-link uri">https://github.com/davidrsch/rrlmgraph-mcp</a></p>
<p>The MCP server exposes the SQLite-persisted graph (written by
<code><a href="../reference/export_to_sqlite.html">export_to_sqlite()</a></code>) to any client that supports the Model
Context Protocol, enabling IDE-level context injection independent of
the R console.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by David Díaz.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
