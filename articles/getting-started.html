<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting Started with rrlmgraph • rrlmgraph</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started with rrlmgraph">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rrlmgraph</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/getting-started.html">Getting Started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/davidrsch/rrlmgraph"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Getting Started with rrlmgraph</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/davidrsch/rrlmgraph/blob/main/vignettes/getting-started.Rmd" class="external-link"><code>vignettes/getting-started.Rmd</code></a></small>
      <div class="d-none name"><code>getting-started.Rmd</code></div>
    </div>

    
    
<p><code>rrlmgraph</code> builds a typed knowledge graph of an R project
and uses it to supply large language models (LLMs) with precise,
token-budgeted context. This vignette walks through the full workflow on
a small self-contained example.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"rrlmgraph"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># For optional LLM chat integration:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"ellmer"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="building-your-first-graph">1. Building your first graph<a class="anchor" aria-label="anchor" href="#building-your-first-graph"></a>
</h2>
<p><code><a href="../reference/build_rrlm_graph.html">build_rrlm_graph()</a></code> accepts a path to any R project – a
package, a scripts folder, or a Shiny app – and returns an
<code>rrlm_graph</code> object.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://davidrsch.github.io/rrlmgraph/">rrlmgraph</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Build a graph for rrlmgraph's own source -- a real package with many</span></span>
<span><span class="co"># functions and edges, so all downstream examples produce meaningful output.</span></span>
<span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_rrlm_graph.html">build_rrlm_graph</a></span><span class="op">(</span><span class="va">pkg_dir</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Detecting project at <span style="color: #0000BB;">/home/runner/work/_temp/Library/rrlmgraph</span></span></span>
<span><span class="co">#&gt; Parsing 0 R file(s)</span></span>
<span><span class="co">#&gt; Warning: No function nodes found in <span style="color: #0000BB;">/home/runner/work/_temp/Library/rrlmgraph</span>.  Empty</span></span>
<span><span class="co">#&gt; graph returned.</span></span>
<span><span class="co">#&gt; Building CALLS edges</span></span>
<span><span class="co">#&gt; Building IMPORT edges</span></span>
<span><span class="co">#&gt; Building TEST edges</span></span>
<span><span class="co">#&gt; Assembling igraph</span></span>
<span><span class="co">#&gt; Computing PageRank</span></span>
<span><span class="co">#&gt; Embedding nodes with method 'tfidf'</span></span>
<span><span class="co">#&gt; Computing semantic similarity edges (threshold 0.7)</span></span>
<span><span class="co">#&gt; Done in 0.35s -- 9 nodes, 0 edges</span></span></code></pre></div>
<p>The function:</p>
<ol style="list-style-type: decimal">
<li>Detects the project type (package / scripts / Shiny app)</li>
<li>Parses every <code>.R</code> file into function nodes via AST
analysis</li>
<li>Resolves CALLS, IMPORTS, and TEST edges between nodes</li>
<li>Fits TF-IDF embeddings for semantic similarity</li>
</ol>
</div>
<div class="section level2">
<h2 id="inspecting-the-graph">2. Inspecting the graph<a class="anchor" aria-label="anchor" href="#inspecting-the-graph"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">graph</span><span class="op">)</span></span>
<span><span class="co">#&gt; IGRAPH af4913a DNW- 9 0 -- </span></span>
<span><span class="co">#&gt; + attr: project_name (g/c), project_root (g/c), project_type (g/c),</span></span>
<span><span class="co">#&gt; | r_version (g/c), build_time (g/n), build_at (g/c), embed_method</span></span>
<span><span class="co">#&gt; | (g/c), embed_model (g/x), cache_path (g/c), name (v/c), node_type</span></span>
<span><span class="co">#&gt; | (v/c), file (v/c), line_start (v/n), line_end (v/n), signature (v/c),</span></span>
<span><span class="co">#&gt; | complexity (v/n), pagerank (v/n), embedding (v/x), weight (e/n),</span></span>
<span><span class="co">#&gt; | edge_type (e/c)</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">graph</span><span class="op">)</span></span>
<span><span class="co">#&gt; IGRAPH af4913a DNW- 9 0 -- </span></span>
<span><span class="co">#&gt; + attr: project_name (g/c), project_root (g/c), project_type (g/c),</span></span>
<span><span class="co">#&gt; | r_version (g/c), build_time (g/n), build_at (g/c), embed_method</span></span>
<span><span class="co">#&gt; | (g/c), embed_model (g/x), cache_path (g/c), name (v/c), node_type</span></span>
<span><span class="co">#&gt; | (v/c), file (v/c), line_start (v/n), line_end (v/n), signature (v/c),</span></span>
<span><span class="co">#&gt; | complexity (v/n), pagerank (v/n), embedding (v/x), weight (e/n),</span></span>
<span><span class="co">#&gt; | edge_type (e/c)</span></span>
<span><span class="co">#&gt; + edges from af4913a (vertex names):</span></span></code></pre></div>
<p><code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> draws a force-directed layout coloured by node
type:</p>
<ul>
<li>
<strong>steelblue</strong> – user-defined functions</li>
<li>
<strong>grey70</strong> – package / imported functions</li>
<li>
<strong>seagreen3</strong> – test files</li>
<li>
<strong>lightyellow</strong> – other nodes</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">graph</span><span class="op">)</span></span></code></pre></div>
<p><img src="getting-started_files/figure-html/plot-1.png" class="r-plt" alt="" width="672"></p>
</div>
<div class="section level2">
<h2 id="querying-context">3. Querying context<a class="anchor" aria-label="anchor" href="#querying-context"></a>
</h2>
<p><code><a href="../reference/query_context.html">query_context()</a></code> performs relevance-guided BFS from the
most relevant nodes and returns a token-budgeted context window ideal
for LLM prompts.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ctx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/query_context.html">query_context</a></span><span class="op">(</span></span>
<span>  <span class="va">graph</span>,</span>
<span>  query <span class="op">=</span> <span class="st">"How does graph traversal select nodes for context?"</span>,</span>
<span>  budget_tokens <span class="op">=</span> <span class="fl">400L</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Seed node: <span style="color: #0000BB;">"cli"</span></span></span>
<span></span>
<span><span class="co"># Nodes selected for the context window</span></span>
<span><span class="va">ctx</span><span class="op">$</span><span class="va">nodes</span></span>
<span><span class="co">#&gt; [1] "cli"</span></span>
<span></span>
<span><span class="co"># Number of tokens used</span></span>
<span><span class="va">ctx</span><span class="op">$</span><span class="va">tokens_used</span></span>
<span><span class="co">#&gt; [1] 82</span></span></code></pre></div>
<p>The assembled context string – ready to paste into a system
prompt:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">ctx</span><span class="op">$</span><span class="va">context_string</span><span class="op">)</span></span>
<span><span class="co">#&gt; # rrlm_graph Context</span></span>
<span><span class="co">#&gt; # Project: rrlmgraph | R 4.5.2 | ~51 tokens</span></span>
<span><span class="co">#&gt; # Query: How does graph traversal select nodes for context?</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## CORE FUNCTIONS</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; ### cli</span></span>
<span><span class="co">#&gt; cli</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## CONSTRAINTS</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Only use the functions and packages listed above. Do not invent APIs, function names, or arguments not shown here. If unsure, ask for clarification.</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="chatting-with-context-llm-required">4. Chatting with context (LLM required)<a class="anchor" aria-label="anchor" href="#chatting-with-context-llm-required"></a>
</h2>
<p><code><a href="../reference/chat_with_context.html">chat_with_context()</a></code> assembles the context and sends it
to an LLM. Supported providers via the <code>ellmer</code> package:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># OpenAI (default) -- requires OPENAI_API_KEY</span></span>
<span><span class="va">answer</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/chat_with_context.html">chat_with_context</a></span><span class="op">(</span></span>
<span>  <span class="va">graph</span>,</span>
<span>  <span class="st">"How does prepare_data() ensure clean input?"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">answer</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># GitHub Models Marketplace -- requires GITHUB_PAT</span></span>
<span><span class="va">answer</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/chat_with_context.html">chat_with_context</a></span><span class="op">(</span></span>
<span>  <span class="va">graph</span>,</span>
<span>  <span class="st">"What does fit_model() return?"</span>,</span>
<span>  provider <span class="op">=</span> <span class="st">"github"</span>,</span>
<span>  model    <span class="op">=</span> <span class="st">"gpt-4o-mini"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Local Ollama -- no API key needed</span></span>
<span><span class="va">answer</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/chat_with_context.html">chat_with_context</a></span><span class="op">(</span></span>
<span>  <span class="va">graph</span>,</span>
<span>  <span class="st">"Summarise the prediction pipeline."</span>,</span>
<span>  provider <span class="op">=</span> <span class="st">"ollama"</span>,</span>
<span>  model    <span class="op">=</span> <span class="st">"llama3.2"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Anthropic Claude -- requires ANTHROPIC_API_KEY</span></span>
<span><span class="va">answer</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/chat_with_context.html">chat_with_context</a></span><span class="op">(</span></span>
<span>  <span class="va">graph</span>,</span>
<span>  <span class="st">"Which function calls prepare_data()?"</span>,</span>
<span>  provider <span class="op">=</span> <span class="st">"anthropic"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Each call automatically logs the query, nodes used, and a response
excerpt to <code>.rrlmgraph/task_trace.jsonl</code> inside the project
root. This trace is used by <code><a href="../reference/update_task_weights.html">update_task_weights()</a></code> to boost
frequently-referenced nodes in future relevance scoring.</p>
</div>
<div class="section level2">
<h2 id="incremental-updates">5. Incremental updates<a class="anchor" aria-label="anchor" href="#incremental-updates"></a>
</h2>
<p>After editing source files you do not need to rebuild the full graph.
<code><a href="../reference/update_graph_incremental.html">update_graph_incremental()</a></code> re-parses only the changed
files:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Simulate editing a file</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"#' Prepare data (updated)"</span>,</span>
<span>  <span class="st">"#'"</span>,</span>
<span>  <span class="st">"#' @param raw A data.frame of raw values."</span>,</span>
<span>  <span class="st">"#' @param remove_na Logical. Remove rows with NAs. Default TRUE."</span>,</span>
<span>  <span class="st">"#' @return A cleaned data.frame."</span>,</span>
<span>  <span class="st">"#' @export"</span>,</span>
<span>  <span class="st">"prepare_data &lt;- function(raw, remove_na = TRUE) {"</span>,</span>
<span>  <span class="st">"  if (remove_na) raw &lt;- raw[complete.cases(raw), ]"</span>,</span>
<span>  <span class="st">"  raw"</span>,</span>
<span>  <span class="st">"}"</span></span>
<span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">proj_dir</span>, <span class="st">"R"</span>, <span class="st">"data_prep.R"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">graph_small</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/update_graph_incremental.html">update_graph_incremental</a></span><span class="op">(</span></span>
<span>  <span class="va">graph_small</span>,</span>
<span>  changed_files <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">proj_dir</span>, <span class="st">"R"</span>, <span class="st">"data_prep.R"</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Incremental graph update</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Changed files: <span style="color: #0000BB;">/tmp/RtmpHchp6R/mypkg_demo/R/data_prep.R</span></span></span>
<span><span class="co">#&gt; Re-parsing 1 file(s).</span></span>
<span><span class="co">#&gt; No new nodes; finalising graph.</span></span>
<span><span class="co">#&gt; Persisting cache to <span style="color: #0000BB;">/tmp/RtmpHchp6R/mypkg_demo</span>.</span></span>
<span><span class="co">#&gt; Graph cached at <span style="color: #0000BB;">/tmp/RtmpHchp6R/mypkg_demo/.rrlmgraph</span></span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">graph_small</span><span class="op">)</span></span>
<span><span class="co">#&gt; IGRAPH 6db780a DNW- 0 0 -- </span></span>
<span><span class="co">#&gt; + attr: project_name (g/c), project_root (g/c), project_type (g/c),</span></span>
<span><span class="co">#&gt; | r_version (g/c), build_time (g/n), build_at (g/c), embed_method</span></span>
<span><span class="co">#&gt; | (g/c), embed_model (g/x), cache_path (g/c), name (v/c), node_type</span></span>
<span><span class="co">#&gt; | (v/c), file (v/c), line_start (v/n), line_end (v/n), signature (v/c),</span></span>
<span><span class="co">#&gt; | complexity (v/n), pagerank (v/n), embedding (v/x), weight (e/n),</span></span>
<span><span class="co">#&gt; | edge_type (e/c)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="caching-the-graph">6. Caching the graph<a class="anchor" aria-label="anchor" href="#caching-the-graph"></a>
</h2>
<p>For large projects, save the built graph to avoid re-parsing on every
session:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Save to &lt;project&gt;/.rrlmgraph/graph.rds</span></span>
<span><span class="fu"><a href="../reference/save_graph_cache.html">save_graph_cache</a></span><span class="op">(</span><span class="va">graph</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Restore in a later session</span></span>
<span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_graph_cache.html">load_graph_cache</a></span><span class="op">(</span><span class="va">proj_dir</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="generating-copilot-instructions">7. Generating Copilot instructions<a class="anchor" aria-label="anchor" href="#generating-copilot-instructions"></a>
</h2>
<p><code><a href="../reference/generate_instructions.html">generate_instructions()</a></code> writes a
<code>.github/copilot-instructions.md</code> file that primes GitHub
Copilot with project-specific context derived from the graph:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/generate_instructions.html">generate_instructions</a></span><span class="op">(</span><span class="va">graph</span>, max_tokens <span class="op">=</span> <span class="fl">3000L</span><span class="op">)</span></span></code></pre></div>
<p>The generated file describes the project structure, key functions,
and their call relationships, giving Copilot accurate context without
manual maintenance.</p>
</div>
<div class="section level2">
<h2 id="using-the-mcp-server">8. Using the MCP server<a class="anchor" aria-label="anchor" href="#using-the-mcp-server"></a>
</h2>
<p>For integration with VS Code and other MCP-capable editors, see the
companion package <strong>rrlmgraph-mcp</strong>: <a href="https://github.com/davidrsch/rrlmgraph-mcp" class="external-link uri">https://github.com/davidrsch/rrlmgraph-mcp</a></p>
<p>The MCP server exposes the SQLite-persisted graph (written by
<code><a href="../reference/export_to_sqlite.html">export_to_sqlite()</a></code>) to any client that supports the Model
Context Protocol, enabling IDE-level context injection independent of
the R console.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by David Díaz.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
